@*FilterByCustomerReviewScore's default view*@

@model LookupDto

@functions {
    public IDictionary<string, string> getRoute(int score)
    {
        var temp = new LookupDto(Model);
        temp.MinCustomerReviewScore = score;
        return temp.ToDictionary();
    }
}

<div class="row mb-3">
    <p class="fw-bold m-0">Customer Reviews</p>

    @*Clear Filter*@
    @if (Model.HasFilterByCustomerReviewScore())
    {
        <a class="row primary-hover" asp-controller="Home" asp-action="ClearFilterByCustomerReviewScore">
            <div class="col-auto pe-1">
                <i class="fa-solid fa-chevron-left"></i>
            </div>
            Clear
        </a>

        if(Model.MinCustomerReviewScore < 5)
        {
            <div class="row filter-sub">
                <div class="col-auto text-warning text-default ps-4 pe-1">
                    @await Component.InvokeAsync("CustomerReviewScore", (double) Model.MinCustomerReviewScore)
                </div>
                & Up
            </div>
        }
        else
        {
            <div class="row filter-sub">
                <div class="col-auto text-warning text-default ps-4 pe-1">
                    @await Component.InvokeAsync("CustomerReviewScore", (double)Model.MinCustomerReviewScore)
                </div>
                & Up
            </div>
        }
    }
    else
    {
        for (int i = 5; i > 0; i--)
        {
            if (i < 5)
            {
                <a class="row primary-hover filter-sub" asp-controller="Home" asp-action="Filter" asp-all-route-data="@getRoute(i)">
                    <div class="col-auto text-warning text-default ps-4 pe-1">
                        @await Component.InvokeAsync("CustomerReviewScore", (double)i)
                    </div>
                    & Up
                </a>
            }
            else
            {
                <a class="row primary-hover filter-sub" asp-controller="Home" asp-action="Filter" asp-all-route-data="@getRoute(i)">
                    <div class="col-auto text-warning text-default ps-4 pe-1">
                        @await Component.InvokeAsync("CustomerReviewScore", (double)i)
                    </div>
                </a>
            }
        }
    }
</div>